- name: Configure a wireguard tunnel
  hosts: wireguard
  pre_tasks:
    - name: Set ip forwarding
      ansible.posix.sysctl:
        name: net.ipv4.ip_forward
        value: 1
    - name: Set ipv6 forwarding
      ansible.posix.sysctl:
        name: net.ipv6.conf.all.forwarding
        value: 1
        reload: true
  tasks:
    - name: Configure wireguard
      ansible.builtin.include_role:
        name: githubixx.ansible_role_wireguard
      vars:
        ansible_become: true
